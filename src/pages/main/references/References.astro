---
import Section from '../../../components/section/Section.astro';
import SectionHeader from '../../../components/text/SectionHeader.astro';
import Blurb from '../../../components/text/Blurb.astro';
import Fan from './real-fan.png';
import Test from './test-image.png';

interface Fan {
  event: string;
  date: string; // iso date
  people: string[];
  description: string;

  imageUrl: string;
  imageAttribution: string;
  imageAlt: string;
}

const { translation } = Astro.props;

const fans = [
  {
    event: "Dokomi",
    date: "2021-06-13",
    people: ["Lukas Müller", "Mia Schneider", "Tobias Weber"],
    description: "Integer eget risus at purus euismod porttitor. Nunc vel sem non purus pellentesque dapibus et eu metus. Donec ornare velit eu metus bibendum egestas. In ornare euismod magna vitae finibus.",
    imageUrl: Fan,
    imageAttribution: "https://twitter.com/CrManzana/status/1499474832924286985",
    imageAlt: "Kiara does an impression."
  },
  {
    event: "Dokomi",
    date: "2021-06-13",
    people: ["Lukas Müller", "Mia Schneider", "Tobias Weber"],
    description: "Integer eget risus at purus euismod porttitor. Nunc vel sem non purus pellentesque dapibus et eu metus. Donec ornare velit eu metus bibendum egestas. In ornare euismod magna vitae finibus.",
    imageUrl: Test,
    imageAttribution: "https://twitter.com/CrManzana/status/1499474832924286985",
    imageAlt: "Kiara does an impression."
  },
  {
    event: "Dokomi",
    date: "2021-06-13",
    people: ["Lukas Müller", "Mia Schneider", "Tobias Weber"],
    description: "Integer eget risus at purus euismod porttitor. Nunc vel sem non purus pellentesque dapibus et eu metus. Donec ornare velit eu metus bibendum egestas. In ornare euismod magna vitae finibus.",
    imageUrl: Fan,
    imageAttribution: "https://twitter.com/CrManzana/status/1499474832924286985",
    imageAlt: "Kiara does an impression."
  },
  {
    event: "Dokomi",
    date: "2021-06-13",
    people: ["Lukas Müller", "Mia Schneider", "Tobias Weber"],
    description: "Integer eget risus at purus euismod porttitor. Nunc vel sem non purus pellentesque dapibus et eu metus. Donec ornare velit eu metus bibendum egestas. In ornare euismod magna vitae finibus.",
    imageUrl: Fan,
    imageAttribution: "https://twitter.com/CrManzana/status/1499474832924286985",
    imageAlt: "Kiara does an impression."
  },
  {
    event: "Dokomi",
    date: "2021-06-13",
    people: ["Lukas Müller", "Mia Schneider", "Tobias Weber"],
    description: "Integer eget risus at purus euismod porttitor. Nunc vel sem non purus pellentesque dapibus et eu metus. Donec ornare velit eu metus bibendum egestas. In ornare euismod magna vitae finibus.",
    imageUrl: Test,
    imageAttribution: "https://twitter.com/CrManzana/status/1499474832924286985",
    imageAlt: "Kiara does an impression."
  }
];


---

<style lang="scss">
  .references {
    background: linear-gradient(38.44deg, rgba(242, 149, 64, 0.17) 6.3%, rgba(220, 255, 145, 0.17) 28.13%, rgba(73, 248, 227, 0.128855) 55.69%, rgba(24, 38, 228, 0.1) 75.01%);

    :global(.wrapper) {
      display: flex;
      flex-direction: column;
      align-items: center;
      row-gap: var(--xxxx-spacing);
    }


    .desc-image {
      display: flex;
      flex-direction: row-reverse;
  
      .description {
        text-align: end;
        color: var(--ina-purple);
  
        :global(.section-header) {
          position: relative;
          color: var(--ina-purple);

        }
        .deco-quote {
          position: absolute;
          top: 0;
          right: 0;
          font-size: 200px;
          color: var(--ina-purple);
          opacity: 0.5;
          font-family: Consolas;
          transform: translate(-200%, -30%);
        }
      }
  
      .fan {
        width: 200px;
        height: 200px;
        filter: opacity(50%);
      }
    }

    .divider {
      width: 100%;
      max-width: 550px;
      height: 2px;
      background-color: var(--ina-purple);
      opacity: 0.3;
      border-radius: var(--x-border-radius);
    }

    .double-dividers {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      row-gap: var(--m-spacing);

      .divider {
        opacity: 0.7;
      }

    }

    .some-fans {
      display: flex;
      flex-direction: column;
      align-items: center;
      row-gap: var(--xxxx-spacing);

      .the-fan {
        padding: var(--l-spacing) 0 var(--l-spacing) 0;
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        align-items: center;
        column-gap: var(--xxx-spacing);
        row-gap: var(--x-spacing);
        text-align: right;

        &.flip {
          flex-direction: row-reverse;
          .the-fan-text {
            text-align: left;

          }
        }

        .the-fan-text {
          flex: 2 0 250px;
          padding: var(--l-spacing) 0 var(--l-spacing) 0;
          opacity: 0.9;


          .the-fan-event {
            font-size: var(--size-h1);
            font-weight: 700;
            color: var(--ina-purple);
          }

          .the-fan-people {
            color: blue;
            font-size: var(--size-primary);
            margin-top: var(--l-spacing);
            color: var(--ina-purple);
            opacity: 0.75;

          }

          .the-fan-description {
            margin-top: var(--x-spacing);
            color: pink;
            font-size: var(--size-primary);
            color: black;
          }
        }

        .the-fan-image {
          flex: 1 1 100px;

          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          box-shadow: 0px 30px 60px -30px rgba(0, 0, 0, 0.3);
          filter: drop-shadow(0px 4px 4px rgba(0, 0, 0, 0.25));
          border-radius: 8px;
          overflow: hidden;

          .image-wrapper {
            overflow: hidden;
            max-height: 256px;

            display: flex;
            justify-content: center;
            align-items: center;

            img {
              height: 100%;
              width: 100%;
              object-fit: contain;
            }
          }

          .the-fan-attribution {
            background-color: var(--light-white);
            font-size: 10px;
            text-align: center;
            width: 100%;
            text-decoration: none;
            color: black;
          }

        }
      }


    }


    @media (max-width: 1280px) {
      .fan {
        display: none;
      }
    }
  }
</style>

<Section id="references" class="references">
  <div class="desc-image">
    <div class="description">
      <SectionHeader><span class="deco-quote">“</span>{translation.storiesFromTheFans}</SectionHeader>
      <Blurb>{translation.storiesFromTheFansDesc}</Blurb>
    </div>
    <img class="fan" src={Fan} alt="Fan" />
  </div>
  <div class="double-dividers">
    <div class="divider" />
    <div class="divider" />
  </div>
  <div class="some-fans">
    {fans
      // Map the fans into a fan component.
      .map((f, i) => (
        <div class={`the-fan ${i % 2 !== 0 ? 'flip' : ''}`}>
          <div class="the-fan-text">
            <div class="the-fan-event">
              {`${f.event} ${new Date(f.date).getFullYear()}`}
            </div>
            <div class="the-fan-people">
              {f.people.join(', ')}
            </div>
            <div class="the-fan-description">
              {f.description}
            </div>
          </div>
          <a class="the-fan-image" href={f.imageAttribution} target="_blank" rel="noopener noreferrer">
            <div class="image-wrapper">
              <img src={f.imageUrl} />
            </div>
            <span class="the-fan-attribution">{f.imageAttribution}</span>
          </a>
        </div>))
      // Insert a divider between each fan component.
      .flatMap((fanComp, i, array) =>
        array.length - 1 !== i
            ? [fanComp, <div class="divider" />]
            : fanComp,)}

  </div>
</Section>